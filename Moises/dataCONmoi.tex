

\chapter{DESENVOLVIMENTO E CONSTRUÇÃO DO SISTEMA DE MEDIÇÃO DE UMIDADE (S.M.U.)} \label{construcao}
\thispagestyle{empty} %Oculta o numero da primeira pagina do capitulo

Este Capítulo descreve as etapas de desenvolvimento e construção do protótipo do S.M.U.\footnote{Patente requerida sob n$^{o}$ PI 0801428-0} Forma do sensor, materiais utilizados, esquemas elétricos, testes realizados e dificuldades encontradas são discutidos tendo em mente o objetivo de se alcançar um sistema de medição que atenda aos requisitos de construção propostos a seguir. A seção~\ref{requisitos} descreve e discute cada Requisitos de Construção. As seções posteriores detalham o desenvolvimento do S.M.U. 
\vspace{3ex}
\section{Requisitos de Construção} \label{requisitos}

Para que o S.M.U. pudesse ser utilizado nas condições de trabalho de uma colhedora, houve a necessidade de se estabelecer critérios de construção do S.M.U. que satisfizessem tais necessidades. Esses critérios foram estabelecidos em função das condições esperadas de trabalho de uma colhedora e da experiência prévia deste tipo de trabalho em poder da Mecamáquina Ltda. A seguir são descritos os critérios que nortearam a construção do S.M.U, chamados de Requisitos de Construção~(\textbf{RC}).

\textbf{RC-01} - Robustez mecânica $\rightarrow$ apresentar resistência a vibrações mecânicas e eventuais choques mecânicos, inerentes às colhedoras; 

\textbf{RC-02} - Rápida Resposta de Leitura $\rightarrow$ apresentar rápida leitura de umidade para que se torne viável comercialmente, visto que os equipamentos importados operam no intervalo de 15 a 30s por parcela colhida;

\textbf{RC-03} - Resistência às Intempéries $\rightarrow$ apresentar resistência às altas temperaturas com exposição ao sol, alta umidade do ar em dias chuvosos e exposição à poeira, inerentes a qualquer tipo de colhedora;
	
\textbf{RC-04} - Simples Operação $\rightarrow$ a fim de que seja manuseado pelo próprio condutor da colhedora;

\textbf{RC-05} - Compatibilidade com um Controlador Lógico Programável $\rightarrow$ responsável pela automação de todo o processo e armazenamento dos dados obtidos;

\textbf{RC-06} - Alimentação Elétrica 12~$V$ $\rightarrow$ única fonte de energia presente em uma colhedora;

\textbf{RC-07} - Baixo Custo $\rightarrow$ Visando as pequenas empresas de pesquisa de sementes (que no Brasil são muitas), comumente limitadas em seus programas de pesquisa pelo alto custo de aquisição por serem equipamentos importados.


Tais critérios serão observados em cada etapa de construção do S.M.U. de modo que se tenha um sistema funcional e adequado às condições de trabalho.

\vspace{3ex}
\section{O Sistema de Medição de Umidade (S.M.U.)} \label{OSMU}


O S.M.U. é um sistema de medição que deve ser capaz de, além de medir o teor de água\footnote{A partir deste capítulo a expressão - teor de água - foi utilizada no lugar de - umidade - (expressão esta comumente utilizada para definir o teor de água presente em grãos e sementes na forma de água presa ou água livre). O uso de teor de água em vez de umidade foi considerado mais apropriado conforme a justificativa dada por Barbedo (1997), tendo, no entanto, exatamente o mesmo significado que umidade. Seu uso foi mantido no capítulo anterior visando não alterar a utilização desta expressão pelos vários autores citados.} de diversas sementes, armazenar os dados obtidos em memória digital e ainda permitir a automação da tarefa de troca de sementes. Para isto, o S.M.U. é constituído de módulos e sub-sistemas capazes de fazer com que o circuito básico de medição de umidade trabalhe adequadamente em uma colhedora e garanta a possibilidade de realização das tarefas descritas acima. 

A fim de esquematizar um sistema que atenda todas as necessidades mostradas, apresenta-se na Fig. \ref{SMUesq} um diagrama funcional do S.M.U. proposto.

\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=0.8]{C:/usuarios/moises/doutorado/latex/figuras/SMUesq.jpg}
	\caption{Diagrama esquemático do Sistema de Medição de Umidade (S.M.U.)}
	\label{SMUesq}
\end{figure}

Em virtude da fonte de alimentação presente em uma colhedora ser uma bateria 12~$Vcc$, o esquema contempla módulos de conversão para adequação da alimentação elétrica dos componentes eletrônicos. Cada módulo mostrado na Fig. \ref{SMUesq} é explicado a seguir:

\begin{itemize}
	\item Fonte inversora entrada CC 12~$V$/saída CA 110~$V$. Fonte com a finalidade de converter a tensão 12~$Vcc$ da bateria da colhedora em uma saída 110~$Vca$. Saída a ser utilizada para alimentação de outros módulos;
	\item Fonte de alimentação +12~$V$/-12~$V$. Responsável pela alimentação do sensor de umidade, constituído de componentes eletrônicos com esta alimentação;
	\item Cuba Sensora que será descrita no item \ref{construcaomecanica};
	\item Circuito eletrônico que será descrito no item \ref{constcircele};
	\item Sensor de umidade. Unidade sensora de umidade de sementes caracterizada pelo trabalho conjunto da cuba sensora com o circuito eletrônico;
	\item Controlador Lógico Programável (C.L.P.). Módulo responsável pela aquisição do sinal de saída do sensor de umidade (através da placa A/D integrada) e conversão do sinal recebido em um valor de teor de água mostrado em um mostrador e guardado em memória digital. Esta conversão será feita através de uma curva de calibração (ver capítulo \ref{calibracao}). Também apresenta capacidade de automação de tarefas como troca de sementes (através, por exemplo, de um sistema eletro-pneumático).
	\item Sistema de Medição de Umidade. Sistema operacional de medição de umidade constituído de todos os módulos descritos acima.
\end{itemize}

\vspace{3ex}
\section{Construção Mecânica do Sensor (Cuba Sensora)} \label{construcaomecanica}


Define-se como cuba sensora o reservatório que receberá uma quantidade definida de sementes para medição do teor de água das mesmas. Este reservatório deve se comportar como um capacitor para que, com o auxílio de um circuito elétrico apropriado, possa realizar a medição indireta de teor de água das sementes.

Sabe-se que os capacitores caracterizam-se pela existência de duas placas paralelas condutoras de eletricidade separadas por um material isolante denominado dielétrico. Como o sensor em questão deve medir a presença de umidade em grãos, tais grãos serão considerados como meio dielétrico. Assim, em tese, espera-se que a capacitância do sensor irá variar em função do teor de água presente na amostra dentro da cuba sensora.

Na seção \ref{sensor} é apresentado o trabalho de Berbert~et~al~(1998) no qual apresentam duas configurações básicas normalmente utilizadas para construção de sensores capacitivos destinados a sementes: capacitores de placas planas paralelas e capacitores de cilindros concêntricos. Os de cilindros concêntricos apresentam uma vantagem importante para os objetivos requisitados neste trabalho: o auto-isolamento proporcionado quando o eletrodo externo é conectado ao fio de aterramento. Como em uma colhedora toda a estrutura é aterrada, o eletrodo externo do sensor também estará aterrado, evitando-se ruídos que provocam interferências de leitura. Também evita-se a necessidade de uso de material isolante no suporte do sensor durante a instalação do mesmo na colhedora devido ao fato de o eletrodo externo possuir a mesma polaridade.

No entanto, o perfil circular característico dos capacitores de cilindros concêntricos apresenta maiores dificuldades de construção mecânica, tornando mais complexa a automação da liberação das sementes de seu interior através de sistema pneumático. Outra desvantagem é a possibilidade de armazenar água no cilindro interno. Uma colhedora fica exposta a alta umidade do ar das madrugadas ou mesmo a chuvas ocasionalmente. Como o cilindro interno é vazado e tampado, pode ocorrer o acúmulo de água no seu interior causando problemas para um correto funcionamento. 

Visando a um capacitor que alie a facilidade de construção mecânica do de placas paralelas com o aterramento externo do de cilindros concêntricos, foi idealizado um capacitor de seção quadrada com um eletrodo interno, isolado, feito de placa plana. 

Acredita-se que o sensor com o formato proposto alia a vantagem de aterramento externo do capacitor de cilindros concêntricos com a maior uniformidade das linhas de campo dos capacitores de placas paralelas, além das facilidades de construção mecânica.

A Figura~\ref{sensorumidadeCAD} mostra um desenho de conjunto do sensor proposto. Foi construído um reservatório de base quadrada $(3)$ (aço ABNT~1010 -- 3,2~$mm$ de espessura) a fim de acondicionar os grãos de maneira adequada. Uma placa isolada de aço inoxidável $(2)$ (aço inoxidável austenítico 304L -- 2,0~$mm$ de espessura) foi convenientemente escolhida devido à alta resistência à corrosão e posicionada no interior do reservatório. O reservatório responde por uma das placas paralelas e a placa de aço inoxidável à outra placa. Assim tem-se um recipiente com característica capacitiva capaz de receber os grãos que funcionarão como dielétrico do mesmo. O isolamento foi conseguido com a fabricação de um suporte isolante $(1)$ (poliamida 6.6 -- \reg{nytanil} 6.6). As dimensões são 109 mm de comprimento, 109 mm de largura e 94 mm de altura, perfazendo um volume aproximado de 1,12~$.10^{-3}m^3$ (1,1 litro), garantindo um significativo volume de amostragem. A placa de aço inoxidável $(2)$ é fixada ao suporte isolante $(1)$ através das abas de fixação $(5)$ da placa de aço inoxidável por meio de parafusos. O pino de contato $(4)$ (latão) que é soldado à placa de aço inoxidável $(2)$ é responsável pelo contato da placa com o circuito elétrico. O parafuso $(6)$ faz o aterramento do reservatório de base cúbica $(3)$ através de fio condutor ligado ao circuito elétrico. A parte inferior é articulada para facilidade de retirada dos grãos durante os ensaios e possibilitar a sua posterior automatização na colhedora (através de um sistema pneumático, por exemplo). A Figura \ref{sensorumidade} mostra a cuba sensora em sua concepção final. 

Relativo à construção mecânica, o sensor acima descrito é de construção robusta, feito de materiais que resistem naturalmente às intempéries e de baixo custo de aquisição, atendendo aos \textbf{RC-01}, \textbf{RC-03} e \textbf{RC-07}. 

\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c }
\includegraphics[angle=0, scale=0.8]{C:/usuarios/moises/doutorado/latex/figuras/sensorCAD.jpg}    
\end{tabular}
  \caption{Desenho de conjunto da cuba sensora}
  \label{sensorumidadeCAD}
\end{center}
\end{figure}


\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c  c  c }
\includegraphics[angle=0, scale=1.1]{C:/usuarios/moises/doutorado/latex/figuras/MU1.jpg} &   \includegraphics{C:/usuarios/moises/doutorado/latex/figuras/MU2.jpg} &
\includegraphics{C:/usuarios/moises/doutorado/latex/figuras/MU3.jpg}
\end{tabular}
  \caption{Concepção final da cuba sensora}
  \label{sensorumidade}
\end{center}
\end{figure}
\vspace{3ex}
\section{Circuito Elétrico e sua Função de Transferência} \label{circuito}

Nesta seção será definido o circuito elétrico a ser implementado ao sensor (descrito no item anterior) e suas características. O circuito deverá atender aos \textbf{RC-02}, \textbf{RC-03}, \textbf{RC-04}, \textbf{RC-05}, \textbf{RC-06} e \textbf{RC-07}.

Mamishev et al (2002), em seu trabalho sobre estimação de parâmetros na medição dieletrométrica, utiliza a configuração mais simples de um capacitor de Maxwell para início dos estudos. O objetivo é determinar as propriedades dielétricas de um material inserido em um capacitor de placas paralelas. Assim, tem-se um capacitor composto por dois dielétricos em série, conforme a Fig. \ref{esqelet}.

\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=0.8]{C:/usuarios/moises/doutorado/latex/figuras/esqelet.jpg}
		\caption{Esquema do circuito elétrico utilizado por Mamishev et al (2002)}
	  \label{esqelet}
\end{figure}

A camada inferior é um dielétrico perfeito de condutividade $\sigma_{b}$ igual a zero e permissividade dielétrica $\epsilon_{b}$ conhecida. A camada superior é o dielétrico cujas propriedades devem ser obtidas através da medição das características dielétricas. A Figura \ref{esqelet} mostra também o esquema do circuito elétrico e o circuito equivalente. 

Apesar de simples, tal circuito não representa as condições reais do sensor proposto visto que o dielétrico será inserido em apenas uma camada (preenchimento completo do sensor com grãos). 

O circuito proposto por Pinto~(1997) também é um circuito muito simples e com potencial para atender aos Requisitos de Construção (seção~\ref{requisitos}). Devido a sua simplicidade, já foi utilizado com sucesso nos trabalhos realizados por Pinto~(1997) e Rende~(1999), relacionados ao desenvolvimento de um sistema de monitoramento de umidade de solo. Este circuito baseia-se na presença de uma fonte alternada de tensão~$U_{e}$, um resistor divisor de tensão~$R_{1}$ e um capacitor real representado pelo resistor $R_{2}$ e o capacitor ideal $C$ (Figura~\ref{esqeletr}). O capacitor real citado passará a representar o sensor construído e descrito na seção~\ref{construcaomecanica}.

\begin{figure}[htbp]
	\centering
		\includegraphics{C:/usuarios/moises/doutorado/latex/figuras/esqeletr.jpg}
		\caption{Esquema do circuito elétrico utilizando o sensor de medição de umidade}
	  \label{esqeletr}
\end{figure}

Da Fig.~\ref{esqeletr}, tem-se que:

\begin{equation} \label{a}
U_{e}=U_{A}-U_{D}
\end{equation}

\begin{equation} \label{b}
U_{R_{1}}=U_{A}-U_{B} 
\end{equation}

Subtraindo \ref{a} de \ref{b}:

\begin{equation} \label{c}
U_{e}-U_{R_{1}}=U_{B}-U_{D} 
\end{equation}
e ainda:

\begin{equation} \label{d}
U_{B}-U_{D}=U_{s} 
\end{equation}

\begin{equation} \label{e}
i=i_{r}+i_{c} 
\end{equation}

\begin{equation} \label{f}
U_{s}=R_{2}i_{r} 
\end{equation}

\begin{equation} \label{g}
i_{c}=C\dot{U}_{s} 
\end{equation}

\begin{equation} \label{h}
U_{R_{1}}=R_{1}i 
\end{equation}

Aplicando de \ref{d} a \ref{h} em \ref{c}:

\begin{center}
$U_{e}-[R_{1}(i_{r}+i_{c})]=U_{s}$

$U_{e}-[R_{1}(\frac{U_{s}}{R_{2}}+C\dot{U}_{s})]=U_{s}$
\end{center}

\begin{equation} \label{i}
R_{1}C\dot{U}_{s}+\frac{(R_{1}+R_{2})}{R_{2}}U_{s}=U_{e} 
\end{equation}

Segundo Doeblin~(1990), qualquer instrumento que siga uma equação diferencial do tipo
\begin{center}
$a_{1}\dot{q_{0}}+a_{0}q_{0}=b_{0}q_{i}$
\end{center}
é, por definição, um instrumento de primeira ordem,
onde:
\begin{itemize}
	\item $a_{0}$, $a_{1}$ e $b_{0}$ são constantes,
	\item $q_{i}$ é um valor de entrada e
	\item $q_{0}$ é um valor de saída.
\end{itemize}


Portanto, a equação \ref{i} mostra que o circuito elétrico escolhido configura um instrumento de primeira ordem.

Chamando o operador diferencial que está aplicado em $U_{s}$ de $D$, dividindo a equação \ref{i} pela constante $a_{0}$ da mesma e colocando $U_{s}$ em evidência, a equação \ref{i} torna-se:

\begin{equation} \label{j}
\left(\frac{R_{1}R_{2}C}{R_{1}+R_{2}}D+1\right)U_{s}=\frac{R_{2}}{R_{1}+R_{2}}U_{e}
\end{equation}

Doebelin~(1990) define o fator multiplicador que acompanha $D$ (na equação \ref{j}) de $\tau$ e o chama de \textit{constante do tempo}:

\begin{equation} \label{k}
\tau = \frac{R_{1}R_{2}C}{R_{1}+R_{2}}
\end{equation}

O fator que multiplica $U_{e}$ em \ref{j} é chamado de \textit{sensibilidade estática}, sendo definido pela letra $K$:

\begin{equation} \label{l}
K = \frac{R_{2}}{R_{1}+R_{2}}
\end{equation}

A função transferência relaciona a entrada e saída de um sistema de medição. Essa relação é definida com a ajuda dos dois parâmetros anteriores (\ref{k} e \ref{l}) como sendo (Doebelin, 1990):

\begin{equation} \label{m}
\frac{q_{0}}{q_{i}}(D) = \frac{U_{s}}{U_{e}}(D)  = \frac{K}{\tau D+1}
\end{equation}

O $D$ entre parêntesis simplesmente enfatiza que a função de transferência é uma relação geral entre $q_{0}$ e $q_{i}$ e não somente uma razão instantânea entre duas quantidades. Além disso, Doebelin~(1990) prova que, para funções transferência senoidais, o operador $D$ pode ser substituído por $i\omega$. Assim, a equação~\ref{m} torna-se a seguinte Função Resposta em Freqüência (DALLY, RILEY e McCONNELL,~1993):

\begin{equation} \label{miomega}
\frac{q_{0}}{q_{i}}(i\omega) = \frac{U_{s}}{U_{e}}(i\omega)  = \frac{K}{\tau i\omega+1}
\end{equation}

Sendo a equação \ref{miomega} uma relação que situa-se no domínio dos números complexos, as respostas de tal equação podem ser analizadas nas formas de amplitude da razão entre entrada e saída ($\frac{q_{0}}{q_{i}}$) e ângulo de fase ($\phi$) dadas por:

\begin{equation} \label{amplitude}
\left|\frac{q_{0}}{q_{i}}(i\omega)\right| = \left|\frac{U_{s}}{U_{e}}(i\omega)\right|  = \frac{K}{\sqrt{\tau^{2} \omega^{2}+1}}
\end{equation}

\begin{equation} \label{angulofase}
\phi = \angle\frac{q_{0}}{q_{i}}(i\omega) = \arctan(-\tau\omega)
\end{equation}

Doebelin~(1990) ilustra uma representação não-dimensional das equações \ref{amplitude} e \ref{angulofase} através do gráfico da Fig.~\ref{frf}.

\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=1.5]{C:/usuarios/moises/doutorado/latex/figuras/frf.jpg}
		\caption{Resposta em freqüência de um instrumento de primeira ordem dada pelas equações \ref{amplitude} e \ref{angulofase} (Doebelin, 1990)}
	  \label{frf}
\end{figure}

\vspace{3ex}
\subsection{Determinação da freqüência de trabalho do circuito} \label{fxUs}


Pelas informações obtidas da literatura, quanto mais alta a freqüência, mais linear é o comportamento do teor de água com relação a constante dielétrica (ver item \ref{dependencia umidade}). No entanto, para atender aos Requisitos de Construção Custo e Robustez, é necessário que a fonte de geração de sinais seja de baixo custo e simples construção (o que geralmente não é observado em sistemas que trabalham a alta freqüência). 

Visando ao atendimento das condições anteriores e a determinação da freqüência a ser utilizada, fez-se necessário o levantamento das curvas de resposta em freqüência para o circuito utilizado. Neste item, considerou-se dois níveis de teor de água do milho próximos aos extremos da faixa de interesse: 10 a 30\% de teor de água. Duas amostras foram preparadas atingindo os valores 11 e 26\% de teor de água, considerados, aqui, como milho seco e úmido, respectivamente.


% $f$ versus $U_{s}$ do circuito proposto para freqüências até 1~MHz. Esta é a máxima freqüência que o CI (circuito integrado) XR~2260 da Exar é capaz de fornecer. Este CI é um gerador de função capaz de produzir senos de alta qualidade. Também é fácil de encontrar em lojas especializadas e seu custo de aquisição é baixo. Além do mais requer um circuito auxiliar simples e de fácil implementação.

\vspace{3ex}
\subsection{Simulação da resposta em freqüência para o circuito utilizado}  \label{simulacao}



Como já mostrado no item \ref{circuito}, o circuito da Fig. \ref{esqeletr} caracteriza um instrumento de primeira ordem. Seu comportamento é semelhante ao de um filtro passa-baixa. Sua resposta em função da freqüência tem resposta equivalente ao mostrado na Fig.~\ref{frf}. 

Este comportamento é, contudo, verificado para instrumentos que possuem a capacitância~$C$ constante. Neste caso, a capacitância varia em função do teor de água da semente que preenche o reservatório do sensor. Portanto, haverá uma curva resposta em freqüência para cada teor de água a ser analisado. Isso mostra que o instrumento trabalhará não sobre uma curva, mas sim alternando de curva em curva para uma dada freqüência fixa. 

Para melhor compreensão desta etapa, foi feita uma simulação em \textit{\reg{Matlab}} utilizando o desenvolvimento matemático para a Função Resposta em Freqüência~(FRF) desenvolvida no item \ref{circuito}, sendo usadas as equações descritas em \ref{amplitude} e \ref{angulofase}.

Assim, foi necessária a determinação dos limites máximo e mínimo dos seguintes parâmetros relacionados às equações anteriores: $R_{1}$ (resistor divisor de tensão), $R_{2}$ (resistência elétrica interna do sensor construído) e $C$ (capacitância interna do sensor construído). Os valores de $R_{2}$ e $C$ foram obtidos com o uso de duas amostras de milho (uma seca e uma úmida). O valor de $R_{1}$ foi, inicialmente, fixado em 10~$k\Omega$. Para a leitura de $R_{2}$ foi utilizado um Megômetro Hewlett Packard HP 3054A conectado diretamente às extremidades de saída das placas interna e externas do sensor. A capacitância $C$ foi conseguida com o auxílio de um capacímetro também ligado às extremidades das placas do sensor. 

A umidificação do milho a 27\% foi feita pela adição de certa quantidade de água aos grãos, com 24 horas para sorção. Foi feita a leitura de $R_{2}$ e $C$ com o sensor em três condições: vazio, cheio com milho seco (11\% de teor de água) e milho úmido (27\% de teor de água). Os valores de teor de água foram conseguidos com um medidor comercial Dickey-John\footnote{Medidor indireto de umidade, portátil, marca \reg{Multi-grain} produzido pela Dikey-John}. Os dados estão mostrados na Tab. \ref{capresist}.

\begin{table}[htbp]
\caption{Valores de $R_2$ e $C$ para sensor vazio e cheio com milho seco e úmido}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multicolumn{ 2}{|c|}{VAZIO} & \multicolumn{ 2}{c|}{SECO (11\%)} & \multicolumn{ 2}{c|}{ÚMIDO (27\%)} \\ \hline
$R_2$ & $C$ & $R_2$ & $C$ & $R_2$ & $C$ \\ \hline
acima de 1$G\Omega$ & 29$pF$ & 1G$\Omega$ & 88$pF$ & 380$k\Omega$ & 6500$pF$ \\ \hline
\end{tabular}
\end{center}
\label{capresist}
\end{table}



Dentro da faixa de 11 a 27~\% de teor de água, $R_{2}$ mostrou variação da ordem de $k\Omega$ e $C$ variou da ordem de milhares de $pF$. Também para o sensor vazio, a diferença de valores foi significativa (o valor de $R_2$ para o sensor vazio extrapolou o limite máximo de leitura do megômetro usado, sendo atribuído a este um valor acima de 1~$G\Omega$). Isso mostra que o modelo proposto (onde o sensor é modelado como sendo uma associação em paralelo de um resistor $R_2$ e um capacitor $C$) está em concordância com os dados observados, não podendo ser desprezado o efeito resistivo do sensor capacitivo.   

A fim de observar o comportamento do modelo em função das capacitâncias (relacionadas aos valores de teor de água dos grãos-dielétricos) obteve-se as curvas\footnote{via simulação \reg{MATLAB} - conforme PROGRAMA I do Apêndice III} em função dos seguintes valores arbitrários (situados dentro dos limites mínimo e máximo de capacitância da Tab. \ref{capresist}): 29, 88, 300, 500, 700, 1000, 2000, 3000 e 6500 pF. Foram obtidos dois grupos de curvas, um grupo para $R_1$ igual a 10~$k\Omega$ e outro para $R_1$ igual 100~$k\Omega$. $R_2$ foi mantido em 1~$G\Omega$. O domínio de freqüência foi estabelecido de 0 a 120~$kHz$. A Figura \ref{simula1} mostra os resultados.


\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c  }
\includegraphics[angle=0, scale=0.3]{C:/usuarios/moises/doutorado/latex/figuras/simula1a.jpg} \\(a) \\   \includegraphics[angle=0, scale=0.3]{C:/usuarios/moises/doutorado/latex/figuras/simula1b.jpg} \\(b)
\end{tabular}
  \caption{Simulação da amplitude da razão entre os sinais de saída $U_s$ e entrada $U_e$ para os seguintes valores de capacitância: 29, 88, 300, 500, 700, 1000, 2000, 3000 e 6500 pF ($R_2$ constante igual a 1~$G\Omega$): (a) $R_1$ igual a 10~$k\Omega$ (b) $R_1$ igual a 100~$k\Omega$ }
  \label{simula1}
\end{center}
\end{figure}




Observa-se que, tanto para o aumento dos valores de capacitância $C$ como para o aumento dos valores do resistor divisor de tensão $R_1$, tem-se uma esperada diminuição da freqüência de corte $f_c$, dada pela equação \ref{fcorte}:

\begin{equation} \label{fcorte}
f_c = \frac{1}{R_1C}
\end{equation}

Desta forma, para cada amostra de sementes (com teores diferentes de água) colocada no sensor, ter-se-á uma leitura de tensão relacionada a uma curva qualquer, de freqüência de corte $f_c$. Como o objetivo não é a obtenção de um filtro de freqüências, a $f_c$ não tem sentido prático neste trabalho. O que se deseja é a capacidade de leitura de diferentes valores de tensão de saída $U_s$ em função dos valores de capacitância $C$ de entrada. 

Para se atingir o objetivo descrito anteriormente, foi feita outra simulação\footnote{via \reg{MATLAB} - conforme PROGRAMA II do Apêndice III} utilizando as equações \ref{amplitude} e \ref{angulofase}, com valores de entrada $R_{2}$ e $C$ dados pela Tab.~\ref{capresist} e $R_{1}$ igual a 10~$k\Omega$. A Figura \ref{simula2a} mostra os resultados.

\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c c }
\includegraphics[angle=0, scale=0.19]{C:/usuarios/moises/doutorado/latex/figuras/simula1c.jpg}  &   \includegraphics[angle=0, scale=0.19]{C:/usuarios/moises/doutorado/latex/figuras/simula1d.jpg} \\(a) & (b)
\end{tabular}
  \caption{Simulação da FRF para $R_1$ igual a 10~$k\Omega$: (a) Amplitude da razão entre os sinais de saída $U_s$ e entrada $U_e$ (b) Ângulo de Fase entre os sinais de entrada $U_e$ e saída $U_s$ }
  \label{simula2a}
\end{center}
\end{figure}

Sendo as curvas da Fig. \ref{simula2a}~(a) obtidas a partir dos valores limites extremos de capacitância relacionados aos teores de água mínimo e máximo desejados (entre aproximadamente 11 e 27\%), fica evidente que existe uma ampla faixa de freqüências de onde pode-se escolher uma, em especial, para a construção do S.M.U. 

Tanto mais sensível será o S.M.U. quanto maior for a diferença entre os valores $U_s/U_e$ mínimo e máximo, referentes às capacitâncias mínima (88~$pF$) e máxima (6500~$pF$). Para freqüências muito baixas esta diferença é cada vez menor, chegando a zero para a freqüência $f$ zero. Para valores intermediários e altos é possível determinar a $f$ montando uma curva que mostre a relação entre a freqüência e as diferenças entre $U_s/U_e$ para milho seco (88~$pF$) e $U_s/U_e$ para milho úmido (6500~$pF$). Este mesmo raciocínio aplica-se quando substitui-se $R_1$ de 10~$k\Omega$ por 100~$k\Omega$ (Fig. \ref{simula2b}).

\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c c }
\includegraphics[angle=0, scale=0.19]{C:/usuarios/moises/doutorado/latex/figuras/simula1e.jpg}  &   \includegraphics[angle=0, scale=0.19]{C:/usuarios/moises/doutorado/latex/figuras/simula1f.jpg} \\(a) & (b)
\end{tabular}
  \caption{Simulação da FRF para $R_1$ igual a 100~$k\Omega$: (a) Amplitude da razão entre os sinais de saída $U_s$ e entrada $U_e$ (b) Ângulo de Fase entre os sinais de entrada $U_e$ e saída $U_s$ }
  \label{simula2b}
\end{center}
\end{figure}

Subtraindo $U_s/U_e$ para milho seco (88~$pF$) de $U_s/U_e$ para milho úmido (6500~$pF$) obtém-se a Fig. \ref{simula3} ((a) - $R_1$ igual a 10~$k\Omega$ e (b) - $R_1$ igual 100~$k\Omega$). Nesta Figura fica claro que as freqüêcias ideais para maior sensibilidade são: 40 a 50~$kHz$ para $R_1$ igual a 10~$k\Omega$ e 3 a 5~$kHz$ para $R_1$ igual a 100~$k\Omega$. 

\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c }
\includegraphics[angle=0, scale=0.3]{C:/usuarios/moises/doutorado/latex/figuras/simula3a.jpg}  \\ (a) \\   \includegraphics[angle=0, scale=0.3]{C:/usuarios/moises/doutorado/latex/figuras/simula3b.jpg} \\ (b)
\end{tabular}
  \caption{Simulação da diferença entre $U_s/U_e$ para milho seco (88~$pF$ - 11~$\%$) e $U_s/U_e$ para milho úmido (6500~$pF$ - 27~$\%$) quando submetido a uma $U_e$ igual a 10~$V$ pico-a-pico senoidal: (a) $R_1$ igual a 10~$k\Omega$ (b) $R_1$ igual a 100~$k\Omega$ } 
  \label{simula3}
\end{center}
\end{figure}
\vspace{3ex}
\subsection{Resposta em freqüência do sensor para milho seco e milho úmido}  \label{respfreq}


Utilizando as mesmas amostras de milho descritas no item \ref{simulacao}, levantou-se alguns pontos da resposta em freqüência do sensor para cinco níveis de freqüência e dois valores de $R_1$. 

A bancada experimental constituiu-se de um gerador de função Tektronix TM 503, o sensor mostrado no item \ref{sensorumidade}, dois resistores de 10~$k\Omega$ e 100~$k\Omega$ ($R_1$) e um osciloscópio Tektronix TDS 310 para medir a tensão de saída $U_s$. A tensão de entrada $U_e$ foi definida em 10,0~$V_{ca}$ pico-a-pico senoidal.

Fixada a amplitude em 10,0~$V$, fez-se uma leitura de tensão para três condições: sensor vazio, sensor cheio com milho seco (11\%) e sensor cheio com milho úmido (27\%). Este procedimento foi repetido para valores de freqüência dentro da faixa de zero a 120~$kHz$ (conforme Tab. \ref{sensibilidade}) e para os dois valores de resistores $R_1$. Os resultados estão mostrados na Tab. \ref{sensibilidade}.



\begin{table}[htbp]
\caption{Levantamento experimental das faixas de sensibilidade do sensor de umidade}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
\textit{f  ($kHz$)} & $R_1 (k\Omega)$ & \multicolumn{ 3}{c|}{$U_s$ ($V_{pico-a-pico}$)} & \multicolumn{ 3}{c|}{Diferenças entre $U_s$ para: ($V_{pico-a-pico}$)} \\ \hline
\multicolumn{1}{|l|}{} &  & Vazio & \ 11\% \ & \ 27\% \ & Vazio e 11\% & 11\% e 27\% & Vazio e 27\% \\ \hline
\multicolumn{ 1}{|c|}{5,0} & 10 & 9,96 & 9,86 & 7,38 & 0,10 & 2,48 & 2,58 \\ \cline{ 2- 8}
\multicolumn{ 1}{|c|}{} & 100 & 8,67 & 8,00 & 2,04 & 0,67 & 5,96 & 6,63 \\ \hline
\multicolumn{ 1}{|c|}{10,0} & 10 & 9,92 & 9,85 & 7,22 & 0,070 & 2,63 & 2,70 \\ \cline{ 2- 8}
\multicolumn{ 1}{|c|}{} & 100 & 7,73 & 6,81 & 1,66 & 0,92 & 5,15 & 6,07 \\ \hline
\multicolumn{ 1}{|c|}{40,0} & 10 & 9,61 & 9,30 & 5,14 & 0,31 & 4,16 & 4,47 \\ \cline{ 2- 8}
\multicolumn{ 1}{|c|}{} & 100 & 3,53 & 2,88 & 0,880 & 0,65 & 2,00 & 2,65 \\ \hline
\multicolumn{ 1}{|c|}{70,0} & 10 & 9,15 & 8,56 & 4,56 & 0,59 & 4,00 & 4,59 \\ \cline{ 2- 8}
\multicolumn{ 1}{|c|}{} & 100 & 2,14 & 1,74 & 0,672 & 0,40 & 1,07 & 1,47 \\ \hline
\multicolumn{ 1}{|c|}{100,0} & 10 & 8,32 & 7,68 & 4,32 & 0,64 & 3,36 & 4,00 \\ \cline{ 2- 8}
\multicolumn{ 1}{|c|}{} & 100 & 1,50 & 1,24 & 0,608 & 0,26 & 0,63 & 0,890 \\ \hline
\end{tabular}
\label{sensibilidade}
\end{table}

Também na Tab. \ref{sensibilidade} estão mostrados os valores obtidos da diferença entre as tensões de saída $U_s$ para: \textit{sensor vazio} e \textit{sensor cheio com milho seco}; \textit{sensor cheio com milho seco} e \textit{cheio com milho úmido}. Tais diferenças podem ser comparadas com os valores das diferenças $U_s/U_e$, obtidos por simulação (Fig. \ref{simula3}). Para tanto, basta dividir os valores das diferenças entre $U_s$ (mostrados na Tab. \ref{sensibilidade}) pela $U_e$ (igual a 10,0~$V$) e organizar os resultados em um gráfico função da freqüência (Fig. \ref{expdiferenca}).



A simulação empregada (Fig. \ref{simula3}) mostrou-se adequada para o circuito elétrico estudado, podendo ser confirmado pela comparação com os gráficos da Fig. \ref{expdiferenca}, onde observa-se um comportamento equivalente das curvas em função da freqüência. 



\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c }
\includegraphics{C:/usuarios/moises/doutorado/latex/figuras/expdif1.jpg}  \\ (a) \\   \includegraphics{C:/usuarios/moises/doutorado/latex/figuras/expdif2.jpg} \\ (b)
\end{tabular}
  \caption{Valores experimentais da diferença entre $U_s/U_e$ para milho seco (11~$\%$) e $U_s/U_e$ para milho úmido (27\%) em função da freqüência quando submetido a uma $U_e$ igual a 10~$V$ pico-a-pico senoidal: (a) $R_1$ igual a 10~$k\Omega$ (b) $R_1$ igual a 100~$k\Omega$ } 
  \label{expdiferenca}
\end{center}
\end{figure}




A experimentação confirmou as faixas de freqüência
\begin{itemize}
	\item (40 a 50)~$kHz$ para $R_1$ igual a 10~$k\Omega$ e
	\item (3 a 5)~$kHz$ para $R_1$ igual a 100~$k\Omega$
\end{itemize}
(definidas no item \ref{simulacao}) como sendo as mais adequadas para se obter uma calibração com maior diferença de amplitude entre os valores máximo e mínimo de tensão de saída $U_s$ em função dos valores limite de teor de água do milho (faixa que compreende o mínimo e máximo de teor de água a ser lido pelo S.M.U.). 

Apesar da equivalência na forma das curvas mostradas nas Fig. \ref{simula3} e \ref{expdiferenca}, a amplitude das diferenças de $U_s$ apresentaram grandes diferenças. Acredita-se que esta discordância é devida ao fato de o gráfico da simulação ter mostrado apenas o módulo do modelo proposto (sendo este um modelo inserido no conjunto dos números complexos). Assim, a diferença de fase não foi incluída ao passo que esta é parte indissociável dos valores obtidos na experimentação. 

%à impossibilidade de prever no modelo proposto as perdas devido aos fatores descritos a seguir: 

%\begin{itemize}
%	\item diferentes formas de absorção da água pela semente, como discutido no item \ref{agua} e
%	\item dependência das propriedades dielétricas em relação à freqüência, densidade volumétrica e da própria umidade, %como discutido no item \ref{natureza};
%\end{itemize}

Com o objetivo de se determinar um valor de freqüência (e não uma faixa) para ser usado na calibração do sistema, tomou-se como parâmetro de escolha o maior valor de diferença de $U_s$ para milho 11~$\%$ e 27~$\%$ mostrados na Tab. \ref{sensibilidade}. Esse fato determinou a freqüência de 5~$kHz$ para $R_1$ igual a 100~$k\Omega$, onde $U_s$ é máximo no valor de 5,96~$V_{ca}$ pico-a-pico. 

No entanto, este não pode ser o único parâmetro de escolha visto que a diferença de $U_s$ para milho vazio e 11~$\%$ não pode ser desprezível. Caso isso ocorra, no processo de calibração, o S.M.U. não será capaz de distinguir se o sensor está vazio ou com milho muito seco. Desta forma, foi escolhida freqüência de 10~$kHz$ para $R_1$ igual a 100~$k\Omega$ visto que esta apresenta a maior diferença entre milho a 11~$\%$ e sensor vazio (Fig. \ref{difvazio}).

\begin{figure}[htbp]
	\centering
		\includegraphics{C:/usuarios/moises/doutorado/latex/figuras/expdif3.jpg}
	\caption{Diferença entre $U_s/U_e$ para sensor vazio e $U_s/U_e$ para milho seco (11~$\%$)}
	\label{difvazio}
\end{figure}

\vspace{3ex}
\subsection{Síntese dos resultados obtidos}  \label{sintesefreq}

Do exposto nos itens anteriores, concluiu-se que:

\begin{itemize}
	\item O circuito do sensor de umidade deve trabalhar com uma onda senoidal de freqüência 10~$kHz$;
	\item O resistor divisor de tensão $R_1$ deve ser de valor 100~$k\Omega$.
\end{itemize}

Portanto, estes resultados serão utilizados para o projeto do circuito eletrônico, descrito a seguir. 


\vspace{3ex}
\section{Construção do circuito eletrônico do sensor}  \label{constcircele}


O circuito elétrico básico utilizado no sensor de umidade foi analisado no item \ref{circuito}. Tal estudo foi feito com o auxílio de equipamentos de laboratório, como osciloscópio e gerador de funções, para determinação de suas características básicas. 

Estuda-se agora a implementação de um circuito eletrônico para o sensor, de modo que o S.M.U. possa trabalhar em uma colhedora. Deste modo, suas principais funções devem contemplar: 

\begin{itemize}
	\item a geração de onda senoidal com freqüência de 10~$kHz$ e amplitude 10~$V$ pico-a-pico;
	\item a retificação do sinal de saída do sensor e
	\item a regulagem de amplitude do sinal retificado para níveis próximos a cinco volts.
\end{itemize}

Portanto, o circuito deve conter três módulos: gerador de sinal senoidal, retificador e regulador de tensão. 

Para o circuito gerador de sinal senoidal foi escolhido o circuito integrado (C.I.) \textit{XR-2206 CP} fabricado pela \textit{EXAR}. Trata-se de um gerador de função de uso geral, muito comum e de fácil aquisição. Algumas de suas características principais são:

\begin{itemize}
	\item Tensão máxima de alimentação: $+-13~Vcc$;
	\item Máxima freqüência de operação: $1~MHz$;
	\item Temperatura de operação: $0$ a $70^{o}C$.
\end{itemize}

A retificação do sinal de saída foi conseguida com o uso do amplificador operacional (A.O.) \textit{LM-358N} fabricado pela \textit{ST Microeletrônica}, associado a um circuito elétrico auxiliar composto de diodos, resistores e um capacitor eletrolítico. A operação de regulagem do sinal retificado é feita neste mesmo (A.O.) com a ajuda de um resistor variável de 200~$k\Omega$. Tal circuito obedeceu ao esquema apresentado por Berlin~(1983). Suas principais características são:

\begin{itemize}
	\item Tensão máxima de alimentação: $+-16~Vcc$;
	\item Temperatura de operação: $0$ a $70^{o}C$.
\end{itemize}

A regulagem de amplitude do sinal retificado é conseguido com o uso de um resistor variável acoplado às saídas próprias do C.I.  \textit{XR-2206 CP}. Isto permite a variação de amplitude do sinal senoidal gerado implicando na variação do sinal retificado. É importante que o sinal retificado seja da ordem de 5~$V$ pois é o valor máximo de leitura da placa A/D do controlador. 

A Figura \ref{eletronico} mostra o projeto do circuito eletrônico. Todo o circuito foi montado e testado para chegar à sua configuração final conforme a Fig \ref{protobod}.


\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=0.9]{C:/usuarios/moises/doutorado/latex/figuras/eletronico.jpg}
	\caption{Projeto do circuito eletrônico do sensor de umidade}
	\label{eletronico}
\end{figure}



\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=1.6]{C:/usuarios/moises/doutorado/latex/figuras/protobod.jpg}
	\caption{Circuito eletrônico montado em um \textit{protoboard}}
	\label{protobod}
\end{figure}


\vspace{3ex}
\section{Módulos do S.M.U. e testes preliminares} \label{modulossmu}


Neste item é feita a escolha dos módulos descritos no item \ref{OSMU}, mostrada a configuração final do S.M.U. e descrito os testes preliminares necessários para a calibração do sistema. 


\vspace{3ex}
\subsection{Escolha dos módulos constituintes do S.M.U.}\label{escolhamodulos}



Visando atender ao \textbf{RC-07} foram escolhidos no mercado módulos de alimentação comuns e de fácil aquisição, a saber: Fonte conversora 110~$Vac$/$\pm12Vcc$ comercial e inversor de freqüência estabilizado, responsável pela conversão de 12~$Vcc$ em 110~$Vac$. 

Com relação ao C.L.P., existem várias alternativas no mercado. Desde os mais sofisticados, com linguagens de programação bastante flexíveis, até os mais simples que podem ser programados diretamente no controlador. Optou-se pelo ZAP 500 da HI Tecnologia Ltda. O principal motivo desta escolha foi o custo de aquisição. Apesar de não ser um controlador de recursos avançados, atende aos propósitos deste trabalho. Utiliza a forma de linguagem de programação por diagrama de contatos\footnote{Também conhecida como programação \textit{LADDER}, conforme salienta Silveira e Santos (1998)}, comum a vários controladores comerciais, o que viabiliza uma fácil migração para outras marcas. Outra vantagem é o ambiente de programação, oferecido gratuitamente pela fabricante. Suas principais características técnicas são:

\begin{itemize}
	\item Alimentação 10 a 38~$Vcc$
	\item Temperatura de operação 0 a 65~$^{o}C$
	\item Oito canais de entrada analógica (placa A/D - Analógico/Digital) para sinais de 0 a 5~$Vcc$
\end{itemize}

A Figura \ref{smu} mostra a configuração final do S.M.U. montado e operacional.

\begin{figure}[htbp]
	\centering
		\includegraphics[angle=0, scale=1.0]{C:/usuarios/moises/doutorado/latex/figuras/smu.jpg}
	\caption{Configuração final do protótipo do S.M.U.}
	\label{smu}
\end{figure}
 

\vspace{3ex}
\subsection{Aferição da placa A/D do Controlador Lógico Programável} \label{afericaoAD}


A placa A/D do C.L.P. recebe o sinal de saída $U$ do circuito eletrônico do sensor e o converte para um sinal digital que é mostrado na tela do controlador. A entrada analógica recebe sinais de tensão de 0 a 5~$Vcc$ e os converte em valores inteiros de 0 a 4.092. 

A fim de utilizar o próprio C.L.P. como voltímetro na calibração do sistema, foi feita sua programação para que o fundo de escala 5~$Vcc$ equivalesse ao valor 4.092. Desta forma a tela do C.L.P. mostrará os valores de tensão na entrada da placa A/D. 

Assim, foi feita uma aferição do C.L.P. na qual utilizou-se uma fonte de sinal constante, marca EMG 18131, como gerador de tensão 0 a 5~$Vcc$, conectado à entrada da placa A/D. Nesta mesma fonte foram conectadas as pontas de prova de um osciloscópio TEKTRONIX TDS 310, usado como equipamento de referência na aferição. Valores de 0 a 5~$Vcc$, com variação de um em um Volt, foram gerados na entrada da placa A/D e comparados às leituras feitas pelo osciloscópio. A Tabela \ref{afericlp} e a Fig. \ref{afeclp} mostram os resultados.



\begin{table}[htbp]
\caption{Valores médios obtidos da aferição do C.L.P.}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textit{Tensão Nominal (V)} & \textit{Osciloscópio (V)} & \textit{C.L.P. (V)} & \textit{Erro (\%)} \\ \hline
0 & 0,002 & 0,01 & 80,00 \\ \hline
1 & 1,017 & 1,02 & 0,29 \\ \hline
2 & 1,997 & 2,01 & 0,65 \\ \hline
3 & 3,023 & 3,02 & 0,10 \\ \hline
4 & 4,007 & 4,03 & 0,57 \\ \hline
5 & 4,961 & 4,96 & 0,02 \\ \hline
\end{tabular}
\end{center}
\label{afericlp}
\end{table}




\begin{figure}[htbp]
\begin{center}
\begin{tabular}{ c }
\includegraphics[angle=0, scale=0.7]{C:/usuarios/moises/doutorado/latex/figuras/afericlp.jpg} 
\end{tabular}
  \caption{Aferição da placa A/D do C.L.P.}
  \label{afeclp}
\end{center}
\end{figure}



Pela Tabela, observa-se que o erro acontece na segunda casa decimal, o que é perfeitamente aceitável para os propósitos deste trabalho. Assim, na etapa de calibração, será usado o próprio C.L.P. como leitor de tensão.


\vspace{3ex}
\subsection{Determinação da tensão $U_{vazio}$ para sensor vazio} \label{tensaovazio}


Quando o sensor estiver na condição vazio (sem sementes), será fornecido pelo seu circuito eletrônico um valor de tensão de saída $U$. Este valor deve ser constante para qualquer S.M.U. construído posteriormente, de modo que, realizada a calibração para um tipo de semente, esta seja aplicável.

O critério para seleção da tensão em vazio do sensor foi o limite superior de leitura de tensão da placa A/D do C.L.P. utilizado. A placa A/D realiza leituras de tensão contínua de 0 a 5~$Vcc$. Definiu-se o valor de 5,10~$V$ como tensão de saída $U$ do sensor. Este valor foi chamado de tensão em vazio do sensor $U_{vazio}$, sendo regulado através do resistor variável do circuito eletrônico da Fig. \ref{protobod}. Assim, sempre que o sensor estiver vazio, a placa A/D do C.L.P. não fará a leitura de tensão, podendo ser inserida, por exemplo, uma mensagem de "sensor vazio".

%\vspace{3ex}
%\section{Conclusões parciais} \label{conclusaoconst}

%\begin{itemize}
%  \item Foi construída a cuba sensora, projetado o circuito eletrônico do sensor de umidade e definido os módulos necessário ao S.M.U. de modo a atender aos \textbf{RC} propostos;
%	\item O circuito eletrônico do sensor de umidade deve trabalhar com uma freqüência de 10$kHz$;
%	\item O resistor divisor de tensão $R_1$ deve ser de valor 100$k\Omega$;
%	\item Foi definido o valor de 5,10$V$ para a Tensão em Vazio ($U_{vazio}$) do sensor de umidade.
%\end{itemize}
